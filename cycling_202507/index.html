<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>チャリコース | 2025年度 中学2年 キャンプ</title>
</head>
<body>
    <div class="top">
        <div class="bg">
            <div class="content">
                <img src="medias/cyclings/top1.jpg">
                <video src="medias/cyclings/top2.mp4"></video>
                <img src="medias/cyclings/top3.jpg">
            </div>
        </div>
        <div class="titles">
            <div class="logos">
                <div class="topLogos">
                    <img src="medias/logos/1/4.svg">
                    <img src="medias/logos/1/2.svg">
                    <img src="medias/logos/1/3.svg">
                    <img src="medias/logos/1/1.svg">
                    
                    <img src="medias/logos/2/2.svg">
                    <img src="medias/logos/2/1.svg">
                    
                    <img src="medias/logos/3/4.svg">
                    <img src="medias/logos/3/3.svg">
                    <img src="medias/logos/3/2.svg">
                    <img src="medias/logos/3/1.svg">
                </div>
                <div class="bottomLogos">
                    <img src="medias/logos/4/4.svg">
                    <img src="medias/logos/4/3.svg">
                    <img src="medias/logos/4/2.svg">
                    <img src="medias/logos/4/1.svg">

                    <img src="medias/logos/5/1.svg">
                    
                    <img src="medias/logos/6/3.svg">
                    <img src="medias/logos/6/1.svg">
                    <img src="medias/logos/6/2.svg">
                </div>
            </div>
        </div>
    </div>
    <div class="filter"></div>
    <div class="container">
        <div class="courses">
            <h1></h1>
            <img src="medias/cyclings/container1.jpg" alt="">
        </div>
    </div>
    <style>
        body {
            margin: 0;
            font-family: "Outfit", "Outfit_Local", "Noto Sans JP", "SF Pro JP", "Arial", sans-serif;
        }
        .container {
            font-size: 1.5em;
        }
        .container div {
            padding: 10px;
        }
        .container img, .container video {
            width: 100%;
            border-radius: 15px;
        }
        .container .courses {
            padding-top: 50vh;
        }
        .filter {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .top {
            height: 100dvh;
        }
        .top .bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .top .bg .content {
            transition: opacity 0.5s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .top .bg img, .top .bg video {
            object-fit: cover;
            width: 100%;
            height: 100%;
            position: absolute;
            transition: opacity 0.5s ease-in-out;
            opacity: 0;
        }
        .top .titles {
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }
        .top .titles .logos {
            position: relative;
            min-height: 100%;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        .top .titles .logos div {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .top .titles .logos img {
            position: absolute;
            object-fit: cover;
            width: 200%;
            max-width: 2000px;
            opacity: 0;
        }
        .top .titles .logos div.bottomLogos img {
            width: 100%;
            max-width: 500px;
            margin-top: 45vh;
        }
        @keyframes logoDisplay {
            0% {
                opacity: 0;
                transform: translateY(-200px);
            }
            50% {
                opacity: 0;
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .logoDisplayAnimation {
            animation: logoDisplay 0.5s ease-in-out forwards;
        }
    </style>
    <script>
        function clog (l) {console.log(l);}
        const d = document;

        const container     = d.querySelector(".container");
        const topTitles     = d.querySelector(".top .titles");
        const filter        = d.querySelector(".filter");
        const topBgContents = d.querySelector(".top .bg div.content");
        const topLogoImgs   = d.querySelectorAll(".top .titles .logos img");

        function logosAnimation () {
            let completedCount = 0;
            topLogoImgs.forEach((logo, index) => {
                const timeOutMs = 75;
                const timeoutId = setTimeout(() => {
                    logo.classList.add("logoDisplayAnimation");
                    logo.style.opacity = 1;
                    completedCount++;
                    if (completedCount === topLogoImgs.length) {
                        const completedTimeout = setTimeout(() => {
                            topBgContents.style.opacity = .5;
                            clearTimeout(completedTimeout);
                        }, timeOutMs * 10);
                    }
                    clearTimeout(timeoutId);
                }, index * timeOutMs);
            });
        }

        Promise.all(Array.from(topLogoImgs).map(node => {
        return new Promise(resolve => {
            if (node.complete) {
                resolve();
            } else {
                node.addEventListener('load', resolve);
                node.addEventListener('error', resolve); // エラーでも完了扱いする場合
            }
        });
        })).then(logosAnimation);

        (() => {
            const topBgMedias = topBgContents.querySelectorAll("img, video");
            let displayIndex = 2;

            function exe () {               
                function isVideoElement (el) {
                    return el.tagName === "VIDEO";
                }
                
                const hiddenTargetIndex = displayIndex % topBgMedias.length;
                topBgMedias[hiddenTargetIndex].style.opacity = 0;

                if (isVideoElement(topBgMedias[hiddenTargetIndex])) {
                    topBgMedias[hiddenTargetIndex].muted = true;
                    const pauseDelayTimeout = setTimeout(() => {
                        topBgMedias[hiddenTargetIndex].pause();
                        clearTimeout(pauseDelayTimeout);
                    }, 500);
                }

                const displayTargetIndex = (displayIndex + 1) % topBgMedias.length;
                topBgMedias[displayTargetIndex].style.opacity = 1;

                if (isVideoElement(topBgMedias[displayTargetIndex])) {
                    topBgMedias[displayTargetIndex].muted = true;
                    topBgMedias[displayTargetIndex].play();
                }
                displayIndex += 1;
            }
            
            setInterval(() => exe(), 2500);
        })();

        function scrollEvent (e) {
            const scrollTop = e.target.scrollingElement.scrollTop;
            topTitles.style.transform = `translateY(${scrollTop * -1}px)`;
            container.style.transform = `translateY(${scrollTop * -.5}px)`;
            filter.style.backdropFilter = `blur(${scrollTop * 0.01}px)`;

        }

        d.addEventListener("scroll", scrollEvent);

    </script>
</body>
</html>